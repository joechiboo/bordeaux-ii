{"version":3,"file":"js/536.d4325b31.js","mappings":"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","sources":["webpack://bordeaux-ii/./src/components/VotingDetail.vue","webpack://bordeaux-ii/./src/components/VotingChart.vue","webpack://bordeaux-ii/./src/components/VotingChart.vue?0a76","webpack://bordeaux-ii/./src/components/VotingDetail.vue?01c1"],"sourcesContent":["<template>\n  <div class=\"voting-detail-container\">\n    <div v-if=\"loading\" class=\"loading-state\">\n      <div class=\"spinner\"></div>\n      <p>載入投票資料中...</p>\n    </div>\n\n    <div v-else-if=\"!voting\" class=\"error-state\">\n      <div class=\"error-icon\">❌</div>\n      <p>找不到投票資料</p>\n      <button class=\"btn-back\" @click=\"goBack\">返回投票列表</button>\n    </div>\n\n    <template v-else>\n      <div class=\"voting-header\">\n        <button class=\"btn-back\" @click=\"goBack\">\n          ← 返回列表\n        </button>\n        <div class=\"header-content\">\n          <h1 class=\"voting-title\">{{ voting.title }}</h1>\n          <div class=\"voting-meta\">\n            <span :class=\"['status-badge', voting.status]\">\n              {{ getStatusLabel(voting.status) }}\n            </span>\n            <span v-if=\"hasVoted\" class=\"voted-badge\">✓ 已投票</span>\n          </div>\n        </div>\n      </div>\n\n      <div class=\"voting-info-card\">\n        <div class=\"info-section\">\n          <h3>📌 投票說明</h3>\n          <p>{{ voting.description }}</p>\n        </div>\n\n        <div class=\"info-grid\">\n          <div class=\"info-item\">\n            <span class=\"info-label\">📅 投票期間</span>\n            <span class=\"info-value\">\n              {{ formatFullDate(voting.start_date) }} ~ {{ formatFullDate(voting.end_date) }}\n            </span>\n          </div>\n          <div class=\"info-item\">\n            <span class=\"info-label\">👥 投票對象</span>\n            <span class=\"info-value\">{{ voting.target_audience || '本社區住戶' }}</span>\n          </div>\n          <div class=\"info-item\">\n            <span class=\"info-label\">🔐 投票方式</span>\n            <span class=\"info-value\">\n              {{ voting.voting_type === 'single' ? '單選制' : '多選制' }}\n            </span>\n          </div>\n          <div class=\"info-item\">\n            <span class=\"info-label\">📈 投票目的</span>\n            <span class=\"info-value\">{{ voting.purpose || '依多數意見決定' }}</span>\n          </div>\n        </div>\n\n        <div v-if=\"voting.attachments && voting.attachments.length > 0\" class=\"attachments\">\n          <h3>📎 附件資料</h3>\n          <ul class=\"attachment-list\">\n            <li v-for=\"(attachment, index) in voting.attachments\" :key=\"index\">\n              <a :href=\"attachment.url\" target=\"_blank\" class=\"attachment-link\">\n                {{ attachment.name }}\n              </a>\n            </li>\n          </ul>\n        </div>\n      </div>\n\n      <div v-if=\"!hasVoted && voting.status === 'ongoing'\" class=\"voting-options\">\n        <h2 class=\"section-title\">🔘 請選擇您的投票選項</h2>\n        <div class=\"options-list\">\n          <label \n            v-for=\"option in voting.voting_options\" \n            :key=\"option.id\"\n            class=\"option-card\"\n            :class=\"{ selected: selectedOption === option.id }\"\n          >\n            <input \n              type=\"radio\" \n              :name=\"`voting-${voting.id}`\"\n              :value=\"option.id\"\n              v-model=\"selectedOption\"\n              class=\"option-radio\"\n            />\n            <div class=\"option-content\">\n              <h4 class=\"option-title\">{{ option.option_text }}</h4>\n              <p v-if=\"option.description\" class=\"option-description\">\n                {{ option.description }}\n              </p>\n            </div>\n          </label>\n        </div>\n\n        <div class=\"voting-actions\">\n          <button \n            class=\"btn-submit\"\n            :disabled=\"!selectedOption || submitting\"\n            @click=\"submitVote\"\n          >\n            {{ submitting ? '提交中...' : '確認投票' }}\n          </button>\n        </div>\n      </div>\n\n      <div v-if=\"hasVoted || voting.status === 'ended'\" class=\"voting-results\">\n        <h2 class=\"section-title\">📊 投票結果</h2>\n        \n        <!-- 使用進階圖表組件 -->\n        <VotingChart \n          :results=\"results\"\n          :statistics=\"statistics\"\n        />\n      </div>\n\n      <div class=\"voting-notice\">\n        <h3>📣 備註</h3>\n        <ul>\n          <li v-if=\"voting.status === 'ongoing'\">\n            投票結果將於 {{ formatFullDate(voting.end_date) }} 後公告\n          </li>\n          <li>若無法線上投票，可至管理室填寫紙本選票</li>\n          <li>投票採匿名制，您的個人資訊將被保密</li>\n        </ul>\n      </div>\n    </template>\n\n    <div v-if=\"showConfirmModal\" class=\"modal-overlay\" @click=\"showConfirmModal = false\">\n      <div class=\"modal-content\" @click.stop>\n        <h3 class=\"modal-title\">確認投票</h3>\n        <p class=\"modal-message\">\n          您選擇的是：<strong>{{ getSelectedOptionText() }}</strong>\n        </p>\n        <p class=\"modal-warning\">投票後無法更改，請確認您的選擇</p>\n        <div class=\"modal-actions\">\n          <button class=\"btn-cancel\" @click=\"showConfirmModal = false\">取消</button>\n          <button class=\"btn-confirm\" @click=\"confirmVote\">確認投票</button>\n        </div>\n      </div>\n    </div>\n\n    <div v-if=\"showSuccessMessage\" class=\"success-message\">\n      <span class=\"success-icon\">✅</span>\n      <span>投票成功！感謝您的參與</span>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { ref, computed, onMounted, onUnmounted } from 'vue';\nimport { useRoute, useRouter } from 'vue-router';\nimport { votingApi, supabase } from '../utils/supabase';\nimport { useStore } from 'vuex';\nimport VotingChart from './VotingChart.vue';\n\nexport default {\n  name: 'VotingDetail',\n  components: {\n    VotingChart\n  },\n  setup() {\n    const route = useRoute();\n    const router = useRouter();\n    const store = useStore();\n    \n    const loading = ref(true);\n    const voting = ref(null);\n    const selectedOption = ref(null);\n    const hasVoted = ref(false);\n    const userVote = ref(null);\n    const submitting = ref(false);\n    const showConfirmModal = ref(false);\n    const showSuccessMessage = ref(false);\n    const results = ref([]);\n    const statistics = ref({\n      totalVotes: 0,\n      participationRate: '0',\n      floorDistribution: null\n    });\n    \n    let votingSubscription = null;\n\n    const sortedResults = computed(() => {\n      return [...results.value].sort((a, b) => b.vote_count - a.vote_count);\n    });\n\n    const getStatusLabel = (status) => {\n      const statusMap = {\n        'upcoming': '即將開始',\n        'ongoing': '進行中',\n        'ended': '已結束'\n      };\n      return statusMap[status] || status;\n    };\n\n    const formatFullDate = (dateString) => {\n      const date = new Date(dateString);\n      return `${date.getFullYear()}/${date.getMonth() + 1}/${date.getDate()}`;\n    };\n\n    const getBarColor = (percentage) => {\n      if (percentage >= 50) return 'linear-gradient(135deg, #10b981, #059669)';\n      if (percentage >= 30) return 'linear-gradient(135deg, #667eea, #764ba2)';\n      return 'linear-gradient(135deg, #f59e0b, #d97706)';\n    };\n\n    const getSelectedOptionText = () => {\n      const option = voting.value?.voting_options?.find(o => o.id === selectedOption.value);\n      return option?.option_text || '';\n    };\n\n    const goBack = () => {\n      router.push('/voting');\n    };\n\n    const fetchVotingDetail = async () => {\n      try {\n        loading.value = true;\n        const topicId = route.params.id;\n        \n        const topic = await votingApi.getVotingTopic(topicId);\n        \n        const now = new Date();\n        if (new Date(topic.start_date) > now) {\n          topic.status = 'upcoming';\n        } else if (new Date(topic.end_date) < now) {\n          topic.status = 'ended';\n        } else {\n          topic.status = 'ongoing';\n        }\n        \n        voting.value = topic;\n        \n        const userId = store.state.user?.id;\n        if (userId) {\n          const vote = await votingApi.checkUserVoted(topicId, userId);\n          if (vote) {\n            hasVoted.value = true;\n            userVote.value = vote;\n          }\n        }\n        \n        if (hasVoted.value || topic.status === 'ended') {\n          await fetchResults();\n        }\n        \n        if (topic.status === 'ongoing') {\n          subscribeToUpdates(topicId);\n        }\n      } catch (error) {\n        console.error('Error fetching voting detail:', error);\n      } finally {\n        loading.value = false;\n      }\n    };\n\n    const fetchResults = async () => {\n      try {\n        const topicId = route.params.id;\n        const [resultsData, statsData] = await Promise.all([\n          votingApi.getVotingResults(topicId),\n          votingApi.getVotingStatistics(topicId)\n        ]);\n        \n        results.value = resultsData;\n        statistics.value = statsData;\n      } catch (error) {\n        console.error('Error fetching results:', error);\n      }\n    };\n\n    const submitVote = () => {\n      if (!selectedOption.value) return;\n      showConfirmModal.value = true;\n    };\n\n    const confirmVote = async () => {\n      try {\n        submitting.value = true;\n        showConfirmModal.value = false;\n        \n        const topicId = route.params.id;\n        const userId = store.state.user?.id;\n        console.log('投票檢查 - 用戶ID:', userId);\n        console.log('投票檢查 - 認證狀態:', store.state.isAuthenticated);\n        \n        if (!userId || !store.state.isAuthenticated) {\n          alert('請先登入後再投票');\n          const returnUrl = route.fullPath;\n          console.log('跳轉到登入頁面，返回URL:', returnUrl);\n          console.log('完整路由資訊:', route);\n          \n          router.push({ \n            path: '/login', \n            query: { \n              returnTo: returnUrl,\n              from: 'voting'\n            } \n          });\n          return;\n        }\n        \n        const additionalData = {\n          floor_number: store.state.user?.floor_number,\n          unit_number: store.state.user?.unit_number\n        };\n        \n        console.log('準備提交投票:', { topicId, selectedOption: selectedOption.value, userId, additionalData });\n        \n        // 直接插入投票記錄，簡化 API 調用\n        const { data, error } = await supabase\n          .from('voting_records')\n          .insert([{\n            topic_id: topicId,\n            user_id: userId,\n            option_id: selectedOption.value,\n            floor_number: additionalData.floor_number,\n            unit_number: additionalData.unit_number,\n            user_agent: navigator.userAgent\n          }])\n          .select()\n          .single();\n\n        if (error) {\n          console.error('Supabase insert error:', error);\n          throw error;\n        }\n\n        console.log('投票成功:', data);\n        \n        hasVoted.value = true;\n        userVote.value = data;\n        showSuccessMessage.value = true;\n        \n        // 嘗試更新結果\n        try {\n          await fetchResults();\n        } catch (resultError) {\n          console.warn('更新結果失敗，但投票成功:', resultError);\n        }\n        \n        setTimeout(() => {\n          showSuccessMessage.value = false;\n        }, 3000);\n      } catch (error) {\n        console.error('Error submitting vote:', error);\n        console.error('Error details:', error);\n        \n        let errorMessage = '投票失敗，請稍後再試';\n        if (error.code === '23505') {\n          errorMessage = '您已經投過票了！';\n        } else if (error.message) {\n          errorMessage = `投票失敗：${error.message}`;\n        }\n        \n        alert(errorMessage);\n      } finally {\n        submitting.value = false;\n      }\n    };\n\n    const subscribeToUpdates = (topicId) => {\n      votingSubscription = votingApi.subscribeToVotingUpdates(topicId, async (payload) => {\n        console.log('Voting update:', payload);\n        await fetchResults();\n      });\n    };\n\n    onMounted(() => {\n      fetchVotingDetail();\n    });\n\n    onUnmounted(() => {\n      if (votingSubscription) {\n        votingApi.unsubscribeFromVotingUpdates(votingSubscription);\n      }\n    });\n\n    return {\n      loading,\n      voting,\n      selectedOption,\n      hasVoted,\n      userVote,\n      submitting,\n      showConfirmModal,\n      showSuccessMessage,\n      results,\n      sortedResults,\n      statistics,\n      getStatusLabel,\n      formatFullDate,\n      getBarColor,\n      getSelectedOptionText,\n      goBack,\n      submitVote,\n      confirmVote\n    };\n  }\n};\n</script>\n\n<style scoped>\n.voting-detail-container {\n  max-width: 100%;\n  width: 100%;\n  margin: 0 auto;\n  padding: 0.5rem;\n  box-sizing: border-box;\n  overflow-x: hidden;\n  min-height: calc(100vh - 60px);\n}\n\n.loading-state, .error-state {\n  text-align: center;\n  padding: 4rem 2rem;\n}\n\n.spinner {\n  width: 50px;\n  height: 50px;\n  border: 3px solid #f3f4f6;\n  border-top: 3px solid #667eea;\n  border-radius: 50%;\n  margin: 0 auto 1rem;\n  animation: spin 1s linear infinite;\n}\n\n@keyframes spin {\n  0% { transform: rotate(0deg); }\n  100% { transform: rotate(360deg); }\n}\n\n.error-icon {\n  font-size: 4rem;\n  margin-bottom: 1rem;\n}\n\n.btn-back {\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  color: white;\n  border: none;\n  padding: 0.75rem 1.25rem;\n  border-radius: 0.75rem;\n  cursor: pointer;\n  font-size: 0.95rem;\n  font-weight: 500;\n  transition: all 0.3s ease;\n  box-shadow: 0 2px 8px rgba(102, 126, 234, 0.3);\n  display: inline-flex;\n  align-items: center;\n  gap: 0.5rem;\n}\n\n.btn-back:hover {\n  background: linear-gradient(135deg, #5a6fd8 0%, #6a4190 100%);\n  transform: translateY(-1px);\n  box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);\n}\n\n.voting-header {\n  margin-bottom: 2rem;\n}\n\n.header-content {\n  margin-top: 1rem;\n}\n\n.voting-title {\n  font-size: 2rem;\n  font-weight: bold;\n  color: #333;\n  margin-bottom: 1rem;\n}\n\n.voting-meta {\n  display: flex;\n  gap: 1rem;\n  align-items: center;\n}\n\n.status-badge {\n  padding: 0.25rem 0.75rem;\n  border-radius: 1rem;\n  font-size: 0.9rem;\n  font-weight: 500;\n}\n\n.status-badge.ongoing {\n  background: #10b981;\n  color: white;\n}\n\n.status-badge.upcoming {\n  background: #f59e0b;\n  color: white;\n}\n\n.status-badge.ended {\n  background: #6b7280;\n  color: white;\n}\n\n.voted-badge {\n  background: #667eea;\n  color: white;\n  padding: 0.25rem 0.75rem;\n  border-radius: 1rem;\n  font-size: 0.9rem;\n}\n\n.voting-info-card {\n  background: white;\n  border-radius: 1rem;\n  padding: 2rem;\n  box-shadow: 0 5px 15px rgba(0,0,0,0.08);\n  margin-bottom: 2rem;\n}\n\n.info-section {\n  margin-bottom: 1.5rem;\n}\n\n.info-section h3 {\n  font-size: 1.2rem;\n  margin-bottom: 0.5rem;\n  color: #333;\n}\n\n.info-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\n  gap: 1rem;\n  margin-bottom: 1.5rem;\n}\n\n.info-item {\n  display: flex;\n  flex-direction: column;\n  gap: 0.25rem;\n}\n\n.info-label {\n  font-size: 0.9rem;\n  color: #666;\n}\n\n.info-value {\n  font-size: 1rem;\n  color: #333;\n  font-weight: 500;\n}\n\n.attachments {\n  margin-top: 1.5rem;\n  padding-top: 1.5rem;\n  border-top: 1px solid #e5e7eb;\n}\n\n.attachment-list {\n  list-style: none;\n  padding: 0;\n  margin-top: 0.5rem;\n}\n\n.attachment-link {\n  color: #667eea;\n  text-decoration: none;\n}\n\n.attachment-link:hover {\n  text-decoration: underline;\n}\n\n.section-title {\n  font-size: 1.5rem;\n  margin-bottom: 1.5rem;\n  color: #333;\n}\n\n.voting-options {\n  background: white;\n  border-radius: 1rem;\n  padding: 2rem;\n  box-shadow: 0 5px 15px rgba(0,0,0,0.08);\n  margin-bottom: 2rem;\n}\n\n.options-list {\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n  margin-bottom: 2rem;\n}\n\n.option-card {\n  display: flex;\n  align-items: flex-start;\n  padding: 1.5rem;\n  border: 2px solid #e5e7eb;\n  border-radius: 0.75rem;\n  cursor: pointer;\n  transition: all 0.3s ease;\n}\n\n.option-card:hover {\n  border-color: #667eea;\n  background: #f9fafb;\n}\n\n.option-card.selected {\n  border-color: #667eea;\n  background: linear-gradient(135deg, rgba(102,126,234,0.05), rgba(118,75,162,0.05));\n}\n\n.option-radio {\n  margin-right: 1rem;\n  margin-top: 0.25rem;\n}\n\n.option-content {\n  flex: 1;\n}\n\n.option-title {\n  font-size: 1.1rem;\n  font-weight: 600;\n  margin-bottom: 0.25rem;\n  color: #333;\n}\n\n.option-description {\n  color: #666;\n  line-height: 1.5;\n}\n\n.voting-actions {\n  text-align: center;\n}\n\n.btn-submit {\n  background: linear-gradient(135deg, #667eea, #764ba2);\n  color: white;\n  border: none;\n  padding: 1rem 3rem;\n  border-radius: 0.5rem;\n  font-size: 1.1rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.3s ease;\n}\n\n.btn-submit:hover:not(:disabled) {\n  opacity: 0.9;\n  transform: translateY(-2px);\n}\n\n.btn-submit:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n\n.voting-results {\n  background: white;\n  border-radius: 1rem;\n  padding: 2rem;\n  box-shadow: 0 5px 15px rgba(0,0,0,0.08);\n  margin-bottom: 2rem;\n}\n\n.results-summary {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));\n  gap: 1rem;\n  margin-bottom: 2rem;\n  padding: 1rem;\n  background: linear-gradient(135deg, rgba(102,126,234,0.05), rgba(118,75,162,0.05));\n  border-radius: 0.75rem;\n}\n\n.summary-item {\n  text-align: center;\n}\n\n.summary-label {\n  display: block;\n  font-size: 0.9rem;\n  color: #666;\n  margin-bottom: 0.25rem;\n}\n\n.summary-value {\n  display: block;\n  font-size: 1.5rem;\n  font-weight: bold;\n  color: #667eea;\n}\n\n.results-chart {\n  display: flex;\n  flex-direction: column;\n  gap: 1.5rem;\n}\n\n.result-item {\n  position: relative;\n}\n\n.result-header {\n  display: flex;\n  justify-content: space-between;\n  margin-bottom: 0.5rem;\n}\n\n.result-option {\n  font-weight: 600;\n  color: #333;\n}\n\n.result-stats {\n  color: #666;\n}\n\n.result-bar {\n  height: 32px;\n  background: #f3f4f6;\n  border-radius: 1rem;\n  overflow: hidden;\n}\n\n.result-fill {\n  height: 100%;\n  transition: width 0.5s ease;\n  border-radius: 1rem;\n}\n\n.your-choice {\n  position: absolute;\n  right: 0;\n  top: 50%;\n  transform: translateY(-50%);\n  background: #667eea;\n  color: white;\n  padding: 0.25rem 0.75rem;\n  border-radius: 1rem;\n  font-size: 0.85rem;\n}\n\n.floor-distribution {\n  margin-top: 2rem;\n  padding-top: 2rem;\n  border-top: 1px solid #e5e7eb;\n}\n\n.floor-distribution h3 {\n  font-size: 1.2rem;\n  margin-bottom: 1rem;\n  color: #333;\n}\n\n.floor-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));\n  gap: 0.75rem;\n}\n\n.floor-item {\n  background: linear-gradient(135deg, #667eea, #764ba2);\n  color: white;\n  padding: 0.75rem;\n  border-radius: 0.5rem;\n  text-align: center;\n}\n\n.floor-label {\n  display: block;\n  font-size: 0.9rem;\n  opacity: 0.9;\n}\n\n.floor-count {\n  display: block;\n  font-size: 1.2rem;\n  font-weight: bold;\n}\n\n.voting-notice {\n  background: #f9fafb;\n  border-radius: 1rem;\n  padding: 1.5rem;\n  margin-bottom: 2rem;\n}\n\n.voting-notice h3 {\n  font-size: 1.1rem;\n  margin-bottom: 0.75rem;\n  color: #333;\n}\n\n.voting-notice ul {\n  list-style: none;\n  padding: 0;\n}\n\n.voting-notice li {\n  padding: 0.5rem 0;\n  color: #666;\n  position: relative;\n  padding-left: 1.5rem;\n}\n\n.voting-notice li::before {\n  content: '•';\n  position: absolute;\n  left: 0;\n  color: #667eea;\n}\n\n.modal-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0,0,0,0.5);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 1000;\n}\n\n.modal-content {\n  background: white;\n  border-radius: 1rem;\n  padding: 2rem;\n  max-width: 400px;\n  width: 90%;\n}\n\n.modal-title {\n  font-size: 1.5rem;\n  margin-bottom: 1rem;\n  color: #333;\n}\n\n.modal-message {\n  margin-bottom: 0.5rem;\n  color: #666;\n}\n\n.modal-warning {\n  color: #ef4444;\n  font-size: 0.9rem;\n  margin-bottom: 1.5rem;\n}\n\n.modal-actions {\n  display: flex;\n  gap: 1rem;\n  justify-content: flex-end;\n}\n\n.btn-cancel {\n  background: #f3f4f6;\n  border: none;\n  padding: 0.75rem 1.5rem;\n  border-radius: 0.5rem;\n  cursor: pointer;\n  font-size: 1rem;\n}\n\n.btn-confirm {\n  background: linear-gradient(135deg, #667eea, #764ba2);\n  color: white;\n  border: none;\n  padding: 0.75rem 1.5rem;\n  border-radius: 0.5rem;\n  cursor: pointer;\n  font-size: 1rem;\n}\n\n.success-message {\n  position: fixed;\n  top: 2rem;\n  right: 2rem;\n  background: #10b981;\n  color: white;\n  padding: 1rem 1.5rem;\n  border-radius: 0.5rem;\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n  box-shadow: 0 10px 30px rgba(0,0,0,0.2);\n  animation: slideIn 0.3s ease;\n}\n\n@keyframes slideIn {\n  from {\n    transform: translateX(100%);\n    opacity: 0;\n  }\n  to {\n    transform: translateX(0);\n    opacity: 1;\n  }\n}\n\n@media (max-width: 768px) {\n  .voting-detail-container {\n    padding: 1rem;\n  }\n\n  .voting-info-card {\n    padding: 1.5rem;\n  }\n\n  .info-grid {\n    grid-template-columns: 1fr;\n  }\n\n  .modal-content {\n    width: 95%;\n  }\n\n  .success-message {\n    left: 1rem;\n    right: 1rem;\n    top: 1rem;\n  }\n}\n</style>","<template>\n  <div class=\"voting-chart-container\">\n    <div class=\"chart-tabs\">\n      <button \n        v-for=\"tab in chartTabs\" \n        :key=\"tab.value\"\n        :class=\"['chart-tab', { active: activeChart === tab.value }]\"\n        @click=\"activeChart = tab.value\"\n      >\n        {{ tab.icon }} {{ tab.label }}\n      </button>\n    </div>\n\n    <div class=\"chart-content\">\n      <!-- 長條圖 -->\n      <div v-if=\"activeChart === 'bar'\" class=\"chart-section\">\n        <h3 class=\"chart-title\">📊 投票結果長條圖</h3>\n        <div class=\"bar-chart\">\n          <div \n            v-for=\"(result, index) in sortedResults\" \n            :key=\"result.option_id\"\n            class=\"bar-item\"\n            :style=\"{ animationDelay: index * 0.1 + 's' }\"\n          >\n            <div class=\"bar-label\">\n              <span class=\"option-text\">{{ result.voting_options?.option_text }}</span>\n              <span class=\"bar-value\">{{ result.vote_count }} 票 ({{ result.percentage }}%)</span>\n            </div>\n            <div class=\"bar-container\">\n              <div \n                class=\"bar-fill\"\n                :style=\"{ \n                  width: getBarWidth(result.percentage) + '%',\n                  background: getBarGradient(index)\n                }\"\n              ></div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <!-- 圓餅圖 -->\n      <div v-if=\"activeChart === 'pie'\" class=\"chart-section\">\n        <h3 class=\"chart-title\">🥧 投票結果圓餅圖</h3>\n        <div class=\"pie-chart-container\">\n          <div class=\"pie-chart-wrapper\">\n            <svg class=\"pie-chart-svg\" viewBox=\"0 0 200 200\">\n              <g class=\"pie-chart-group\">\n                <circle \n                  v-for=\"(result, index) in sortedResults\"\n                  :key=\"result.option_id\"\n                  class=\"pie-slice\"\n                  :cx=\"100\"\n                  :cy=\"100\"\n                  :r=\"80\"\n                  fill=\"transparent\"\n                  :stroke=\"getSliceColor(index)\"\n                  :stroke-width=\"60\"\n                  :stroke-dasharray=\"`${getSliceDashArray(result.percentage)} ${circumference}`\"\n                  :stroke-dashoffset=\"getSliceOffset(index)\"\n                  :style=\"{ animationDelay: index * 0.2 + 's' }\"\n                />\n              </g>\n              <text \n                x=\"100\" \n                y=\"100\" \n                text-anchor=\"middle\" \n                dominant-baseline=\"middle\" \n                class=\"pie-center-text\"\n              >\n                總投票數\n              </text>\n              <text \n                x=\"100\" \n                y=\"115\" \n                text-anchor=\"middle\" \n                dominant-baseline=\"middle\" \n                class=\"pie-center-number\"\n              >\n                {{ totalVotes }}\n              </text>\n            </svg>\n          </div>\n          <div class=\"pie-legend\">\n            <div \n              v-for=\"(result, index) in sortedResults\" \n              :key=\"result.option_id\"\n              class=\"legend-item\"\n            >\n              <span \n                class=\"legend-color\"\n                :style=\"{ background: getSliceColor(index) }\"\n              ></span>\n              <span class=\"legend-text\">\n                {{ result.voting_options?.option_text }} \n                ({{ result.percentage }}%)\n              </span>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <!-- 樓層分布熱力圖 -->\n      <div v-if=\"activeChart === 'heatmap'\" class=\"chart-section\">\n        <h3 class=\"chart-title\">🏢 樓層投票分布熱力圖</h3>\n        <div v-if=\"floorData && Object.keys(floorData).length > 0\" class=\"heatmap-container\">\n          <div class=\"floor-grid\">\n            <div \n              v-for=\"(count, floor) in floorData\" \n              :key=\"floor\"\n              class=\"floor-cell\"\n              :class=\"getFloorHeatClass(count)\"\n              :style=\"{ animationDelay: Math.random() * 0.5 + 's' }\"\n            >\n              <div class=\"floor-label\">{{ floor }}F</div>\n              <div class=\"floor-count\">{{ count }}</div>\n            </div>\n          </div>\n          <div class=\"heatmap-legend\">\n            <span class=\"legend-title\">投票人數：</span>\n            <div class=\"heat-scale\">\n              <div class=\"heat-level heat-low\">少</div>\n              <div class=\"heat-level heat-medium\">中</div>\n              <div class=\"heat-level heat-high\">多</div>\n            </div>\n          </div>\n        </div>\n        <div v-else class=\"no-floor-data\">\n          <p>暫無樓層分布數據</p>\n        </div>\n      </div>\n\n      <!-- 參與率統計 -->\n      <div v-if=\"activeChart === 'stats'\" class=\"chart-section\">\n        <h3 class=\"chart-title\">📈 參與率統計</h3>\n        <div class=\"stats-dashboard\">\n          <div class=\"stat-cards\">\n            <div class=\"stat-card primary\">\n              <div class=\"stat-icon\">🗳</div>\n              <div class=\"stat-content\">\n                <div class=\"stat-value\">{{ totalVotes }}</div>\n                <div class=\"stat-label\">總投票數</div>\n              </div>\n            </div>\n            <div class=\"stat-card success\">\n              <div class=\"stat-icon\">📊</div>\n              <div class=\"stat-content\">\n                <div class=\"stat-value\">{{ participationRate }}%</div>\n                <div class=\"stat-label\">參與率</div>\n              </div>\n            </div>\n            <div class=\"stat-card warning\">\n              <div class=\"stat-icon\">🏠</div>\n              <div class=\"stat-content\">\n                <div class=\"stat-value\">{{ totalHouseholds }}</div>\n                <div class=\"stat-label\">總戶數</div>\n              </div>\n            </div>\n          </div>\n\n          <div class=\"participation-progress\">\n            <div class=\"progress-header\">\n              <span class=\"progress-title\">總體參與進度</span>\n              <span class=\"progress-percentage\">{{ participationRate }}%</span>\n            </div>\n            <div class=\"progress-bar\">\n              <div \n                class=\"progress-fill\"\n                :style=\"{ width: participationRate + '%' }\"\n              ></div>\n            </div>\n            <div class=\"progress-labels\">\n              <span>0%</span>\n              <span>50%</span>\n              <span>100%</span>\n            </div>\n          </div>\n\n          <div v-if=\"timeSeriesData && timeSeriesData.length > 0\" class=\"time-series\">\n            <h4>投票時間分布</h4>\n            <div class=\"time-chart\">\n              <div \n                v-for=\"(data, index) in timeSeriesData\" \n                :key=\"index\"\n                class=\"time-bar\"\n                :style=\"{ \n                  height: (data.count / maxTimeCount * 100) + '%',\n                  animationDelay: index * 0.1 + 's'\n                }\"\n                :title=\"`${data.hour}:00 - ${data.count} 票`\"\n              >\n                <div class=\"time-label\">{{ data.hour }}</div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { computed, ref } from 'vue';\n\nexport default {\n  name: 'VotingChart',\n  props: {\n    results: {\n      type: Array,\n      default: () => []\n    },\n    statistics: {\n      type: Object,\n      default: () => ({})\n    }\n  },\n  setup(props) {\n    const activeChart = ref('bar');\n    \n    const chartTabs = [\n      { value: 'bar', label: '長條圖', icon: '📊' },\n      { value: 'pie', label: '圓餅圖', icon: '🥧' },\n      { value: 'heatmap', label: '樓層分布', icon: '🏢' },\n      { value: 'stats', label: '統計數據', icon: '📈' }\n    ];\n\n    const sortedResults = computed(() => {\n      return [...props.results].sort((a, b) => b.vote_count - a.vote_count);\n    });\n\n    const totalVotes = computed(() => {\n      return props.results.reduce((sum, result) => sum + result.vote_count, 0);\n    });\n\n    const participationRate = computed(() => {\n      return props.statistics.participationRate || '0';\n    });\n\n    const totalHouseholds = computed(() => {\n      return props.statistics.totalHouseholds || 100;\n    });\n\n    const floorData = computed(() => {\n      return props.statistics.floorDistribution || {};\n    });\n\n    const timeSeriesData = computed(() => {\n      // 模擬時間序列數據，實際應該從 API 獲取\n      const hours = Array.from({ length: 24 }, (_, i) => i);\n      return hours.map(hour => ({\n        hour: hour.toString().padStart(2, '0'),\n        count: Math.floor(Math.random() * 10) + 1\n      }));\n    });\n\n    const maxTimeCount = computed(() => {\n      return Math.max(...timeSeriesData.value.map(d => d.count));\n    });\n\n    const circumference = 502.4; // 2 * PI * 80\n\n    const getBarWidth = (percentage) => {\n      return Math.min(percentage, 100);\n    };\n\n    const getBarGradient = (index) => {\n      const gradients = [\n        'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\n        'linear-gradient(135deg, #f093fb 0%, #f5576c 100%)',\n        'linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)',\n        'linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)',\n        'linear-gradient(135deg, #fa709a 0%, #fee140 100%)'\n      ];\n      return gradients[index % gradients.length];\n    };\n\n    const getSliceColor = (index) => {\n      const colors = ['#667eea', '#f093fb', '#4facfe', '#43e97b', '#fa709a'];\n      return colors[index % colors.length];\n    };\n\n    const getSliceDashArray = (percentage) => {\n      return (percentage / 100) * circumference;\n    };\n\n    const getSliceOffset = (index) => {\n      let offset = 0;\n      for (let i = 0; i < index; i++) {\n        offset += getSliceDashArray(sortedResults.value[i].percentage);\n      }\n      return -offset;\n    };\n\n    const getFloorHeatClass = (count) => {\n      const maxCount = Math.max(...Object.values(floorData.value));\n      const ratio = count / maxCount;\n      \n      if (ratio > 0.7) return 'heat-high';\n      if (ratio > 0.4) return 'heat-medium';\n      return 'heat-low';\n    };\n\n    return {\n      activeChart,\n      chartTabs,\n      sortedResults,\n      totalVotes,\n      participationRate,\n      totalHouseholds,\n      floorData,\n      timeSeriesData,\n      maxTimeCount,\n      circumference,\n      getBarWidth,\n      getBarGradient,\n      getSliceColor,\n      getSliceDashArray,\n      getSliceOffset,\n      getFloorHeatClass\n    };\n  }\n};\n</script>\n\n<style scoped>\n.voting-chart-container {\n  background: white;\n  border-radius: 1rem;\n  padding: 2rem;\n  box-shadow: 0 5px 15px rgba(0,0,0,0.08);\n}\n\n.chart-tabs {\n  display: flex;\n  gap: 0.5rem;\n  margin-bottom: 2rem;\n  border-bottom: 2px solid #f0f0f0;\n  padding-bottom: 0;\n}\n\n.chart-tab {\n  padding: 0.75rem 1.5rem;\n  background: none;\n  border: none;\n  font-size: 1rem;\n  color: #666;\n  cursor: pointer;\n  position: relative;\n  transition: all 0.3s ease;\n  border-radius: 0.5rem 0.5rem 0 0;\n}\n\n.chart-tab.active {\n  color: #667eea;\n  font-weight: bold;\n  background: linear-gradient(135deg, rgba(102,126,234,0.1), rgba(118,75,162,0.1));\n}\n\n.chart-tab.active::after {\n  content: '';\n  position: absolute;\n  bottom: -2px;\n  left: 0;\n  right: 0;\n  height: 2px;\n  background: linear-gradient(135deg, #667eea, #764ba2);\n}\n\n.chart-title {\n  font-size: 1.5rem;\n  margin-bottom: 1.5rem;\n  color: #333;\n  text-align: center;\n}\n\n/* 長條圖樣式 */\n.bar-chart {\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n}\n\n.bar-item {\n  animation: slideInLeft 0.5s ease-out forwards;\n  opacity: 0;\n  transform: translateX(-20px);\n}\n\n@keyframes slideInLeft {\n  to {\n    opacity: 1;\n    transform: translateX(0);\n  }\n}\n\n.bar-label {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 0.5rem;\n}\n\n.option-text {\n  font-weight: 600;\n  color: #333;\n}\n\n.bar-value {\n  color: #666;\n  font-size: 0.9rem;\n}\n\n.bar-container {\n  height: 40px;\n  background: #f3f4f6;\n  border-radius: 20px;\n  overflow: hidden;\n  position: relative;\n}\n\n.bar-fill {\n  height: 100%;\n  border-radius: 20px;\n  transition: width 1s ease-out;\n  position: relative;\n}\n\n.bar-fill::after {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);\n  animation: shimmer 2s infinite;\n}\n\n@keyframes shimmer {\n  0% { transform: translateX(-100%); }\n  100% { transform: translateX(100%); }\n}\n\n/* 圓餅圖樣式 */\n.pie-chart-container {\n  display: flex;\n  align-items: center;\n  gap: 3rem;\n  justify-content: center;\n}\n\n.pie-chart-wrapper {\n  flex-shrink: 0;\n}\n\n.pie-chart-svg {\n  width: 300px;\n  height: 300px;\n}\n\n.pie-slice {\n  transform-origin: 100px 100px;\n  transform: rotate(-90deg);\n  transition: stroke-width 0.3s ease;\n  animation: drawSlice 1s ease-out forwards;\n}\n\n.pie-slice:hover {\n  stroke-width: 70;\n}\n\n@keyframes drawSlice {\n  from {\n    stroke-dasharray: 0 502.4;\n  }\n}\n\n.pie-center-text {\n  font-size: 12px;\n  fill: #666;\n}\n\n.pie-center-number {\n  font-size: 18px;\n  font-weight: bold;\n  fill: #333;\n}\n\n.pie-legend {\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n}\n\n.legend-item {\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n}\n\n.legend-color {\n  width: 16px;\n  height: 16px;\n  border-radius: 50%;\n  flex-shrink: 0;\n}\n\n.legend-text {\n  color: #333;\n  font-size: 0.95rem;\n}\n\n/* 熱力圖樣式 */\n.heatmap-container {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 2rem;\n}\n\n.floor-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));\n  gap: 1rem;\n  width: 100%;\n  max-width: 600px;\n}\n\n.floor-cell {\n  background: #f3f4f6;\n  border-radius: 0.75rem;\n  padding: 1rem;\n  text-align: center;\n  transition: all 0.3s ease;\n  animation: fadeInScale 0.5s ease-out forwards;\n  opacity: 0;\n  transform: scale(0.8);\n}\n\n@keyframes fadeInScale {\n  to {\n    opacity: 1;\n    transform: scale(1);\n  }\n}\n\n.floor-cell.heat-low {\n  background: linear-gradient(135deg, #dbeafe, #bfdbfe);\n  color: #1e40af;\n}\n\n.floor-cell.heat-medium {\n  background: linear-gradient(135deg, #fef3c7, #fed7aa);\n  color: #92400e;\n}\n\n.floor-cell.heat-high {\n  background: linear-gradient(135deg, #fecaca, #fca5a5);\n  color: #991b1b;\n}\n\n.floor-label {\n  font-size: 0.9rem;\n  font-weight: 500;\n  margin-bottom: 0.25rem;\n}\n\n.floor-count {\n  font-size: 1.5rem;\n  font-weight: bold;\n}\n\n.heatmap-legend {\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n}\n\n.legend-title {\n  color: #666;\n  font-weight: 500;\n}\n\n.heat-scale {\n  display: flex;\n  gap: 0.5rem;\n}\n\n.heat-level {\n  padding: 0.25rem 0.75rem;\n  border-radius: 1rem;\n  font-size: 0.85rem;\n  font-weight: 500;\n}\n\n.heat-level.heat-low {\n  background: linear-gradient(135deg, #dbeafe, #bfdbfe);\n  color: #1e40af;\n}\n\n.heat-level.heat-medium {\n  background: linear-gradient(135deg, #fef3c7, #fed7aa);\n  color: #92400e;\n}\n\n.heat-level.heat-high {\n  background: linear-gradient(135deg, #fecaca, #fca5a5);\n  color: #991b1b;\n}\n\n.no-floor-data {\n  text-align: center;\n  padding: 2rem;\n  color: #666;\n}\n\n/* 統計數據樣式 */\n.stats-dashboard {\n  display: flex;\n  flex-direction: column;\n  gap: 2rem;\n}\n\n.stat-cards {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n  gap: 1.5rem;\n}\n\n.stat-card {\n  padding: 1.5rem;\n  border-radius: 1rem;\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n  animation: bounceIn 0.6s ease-out forwards;\n}\n\n@keyframes bounceIn {\n  0% { transform: scale(0.3); opacity: 0; }\n  50% { transform: scale(1.05); }\n  70% { transform: scale(0.9); }\n  100% { transform: scale(1); opacity: 1; }\n}\n\n.stat-card.primary {\n  background: linear-gradient(135deg, #667eea, #764ba2);\n  color: white;\n}\n\n.stat-card.success {\n  background: linear-gradient(135deg, #48bb78, #38a169);\n  color: white;\n}\n\n.stat-card.warning {\n  background: linear-gradient(135deg, #ed8936, #dd6b20);\n  color: white;\n}\n\n.stat-icon {\n  font-size: 2.5rem;\n}\n\n.stat-value {\n  font-size: 2rem;\n  font-weight: bold;\n  margin-bottom: 0.25rem;\n}\n\n.stat-label {\n  font-size: 0.9rem;\n  opacity: 0.9;\n}\n\n.participation-progress {\n  background: #f9fafb;\n  padding: 1.5rem;\n  border-radius: 1rem;\n}\n\n.progress-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 1rem;\n}\n\n.progress-title {\n  font-weight: 600;\n  color: #333;\n}\n\n.progress-percentage {\n  font-size: 1.5rem;\n  font-weight: bold;\n  color: #667eea;\n}\n\n.progress-bar {\n  height: 20px;\n  background: #e5e7eb;\n  border-radius: 10px;\n  overflow: hidden;\n  margin-bottom: 0.5rem;\n}\n\n.progress-fill {\n  height: 100%;\n  background: linear-gradient(135deg, #667eea, #764ba2);\n  border-radius: 10px;\n  transition: width 1.5s ease-out;\n}\n\n.progress-labels {\n  display: flex;\n  justify-content: space-between;\n  font-size: 0.85rem;\n  color: #666;\n}\n\n.time-series {\n  background: #f9fafb;\n  padding: 1.5rem;\n  border-radius: 1rem;\n}\n\n.time-series h4 {\n  margin-bottom: 1rem;\n  color: #333;\n}\n\n.time-chart {\n  display: flex;\n  align-items: end;\n  gap: 0.25rem;\n  height: 100px;\n  padding: 1rem 0;\n}\n\n.time-bar {\n  flex: 1;\n  background: linear-gradient(135deg, #667eea, #764ba2);\n  border-radius: 2px 2px 0 0;\n  position: relative;\n  min-height: 4px;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  animation: growUp 0.8s ease-out forwards;\n}\n\n@keyframes growUp {\n  from { height: 0; }\n}\n\n.time-bar:hover {\n  opacity: 0.8;\n}\n\n.time-label {\n  position: absolute;\n  bottom: -20px;\n  left: 50%;\n  transform: translateX(-50%);\n  font-size: 0.7rem;\n  color: #666;\n}\n\n@media (max-width: 768px) {\n  .chart-tabs {\n    flex-wrap: wrap;\n  }\n\n  .pie-chart-container {\n    flex-direction: column;\n    gap: 1.5rem;\n  }\n\n  .pie-chart-svg {\n    width: 250px;\n    height: 250px;\n  }\n\n  .floor-grid {\n    grid-template-columns: repeat(auto-fill, minmax(60px, 1fr));\n  }\n\n  .stat-cards {\n    grid-template-columns: 1fr;\n  }\n\n  .time-chart {\n    height: 80px;\n  }\n}\n</style>","import { render } from \"./VotingChart.vue?vue&type=template&id=70ba68f0&scoped=true\"\nimport script from \"./VotingChart.vue?vue&type=script&lang=js\"\nexport * from \"./VotingChart.vue?vue&type=script&lang=js\"\n\nimport \"./VotingChart.vue?vue&type=style&index=0&id=70ba68f0&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-70ba68f0\"]])\n\nexport default __exports__","import { render } from \"./VotingDetail.vue?vue&type=template&id=5b145910&scoped=true\"\nimport script from \"./VotingDetail.vue?vue&type=script&lang=js\"\nexport * from \"./VotingDetail.vue?vue&type=script&lang=js\"\n\nimport \"./VotingDetail.vue?vue&type=style&index=0&id=5b145910&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-5b145910\"]])\n\nexport default __exports__"],"names":["class","key","_createElementVNode","_hoisted_3","_hoisted_4","_hoisted_55","_hoisted_56","_createElementBlock","_hoisted_1","$setup","loading","_hoisted_2","_hoisted_5","voting","_Fragment","_hoisted_9","onClick","_cache","args","goBack","_hoisted_10","_hoisted_11","_toDisplayString","title","_hoisted_12","_normalizeClass","status","getStatusLabel","hasVoted","_hoisted_13","_createCommentVNode","_hoisted_14","_hoisted_15","_hoisted_16","description","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","formatFullDate","start_date","end_date","_hoisted_21","_hoisted_22","_hoisted_23","target_audience","_hoisted_24","_hoisted_25","_hoisted_26","voting_type","_hoisted_27","_hoisted_28","_hoisted_29","purpose","attachments","length","_hoisted_30","_hoisted_31","_hoisted_32","_renderList","attachment","index","href","url","target","name","_hoisted_33","_hoisted_34","_hoisted_35","_hoisted_36","voting_options","option","id","selected","selectedOption","type","value","$event","_hoisted_37","_hoisted_38","_hoisted_39","option_text","_hoisted_40","_hoisted_41","disabled","submitting","submitVote","_hoisted_42","_hoisted_43","_hoisted_44","_createVNode","_component_VotingChart","results","statistics","_hoisted_45","_hoisted_46","_hoisted_47","_hoisted_48","_hoisted_49","_hoisted_6","_hoisted_7","_hoisted_8","showConfirmModal","_withModifiers","_hoisted_50","_hoisted_51","_createTextVNode","getSelectedOptionText","_hoisted_52","_hoisted_53","confirmVote","showSuccessMessage","_hoisted_54","_hoisted_57","viewBox","x","y","_createStaticVNode","chartTabs","tab","active","activeChart","icon","label","sortedResults","result","option_id","style","_normalizeStyle","animationDelay","vote_count","percentage","getBarWidth","getBarGradient","cx","cy","r","fill","stroke","getSliceColor","getSliceDashArray","circumference","getSliceOffset","totalVotes","background","floorData","Object","keys","count","floor","getFloorHeatClass","Math","random","participationRate","totalHouseholds","width","timeSeriesData","_hoisted_58","_hoisted_59","_hoisted_60","data","maxTimeCount","hour","_hoisted_62","_hoisted_61","props","Array","default","setup","ref","computed","sort","a","b","reduce","sum","floorDistribution","hours","from","_","i","map","toString","padStart","max","d","min","gradients","colors","offset","maxCount","values","ratio","__exports__","components","VotingChart","route","useRoute","router","useRouter","store","useStore","userVote","votingSubscription","statusMap","dateString","date","Date","getFullYear","getMonth","getDate","getBarColor","find","o","push","fetchVotingDetail","async","topicId","params","topic","votingApi","getVotingTopic","now","userId","state","user","vote","checkUserVoted","fetchResults","subscribeToUpdates","error","console","resultsData","statsData","Promise","all","getVotingResults","getVotingStatistics","log","isAuthenticated","alert","returnUrl","fullPath","path","query","returnTo","additionalData","floor_number","unit_number","supabase","insert","topic_id","user_id","user_agent","navigator","userAgent","select","single","resultError","warn","setTimeout","errorMessage","code","message","subscribeToVotingUpdates","payload","onMounted","onUnmounted","unsubscribeFromVotingUpdates","render"],"sourceRoot":""}